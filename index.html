<!DOCTYPE html>
<html lang="en">
  <head>
    <title>LockBase | Home</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="LockBase App" />
    <link rel="icon" type="image/png" href="assets/LockBase.png" />
    <link rel="apple-touch-icon" href="assets/LockBase.png" />
    <link rel="manifest" href="./manifest.json" />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="assets/LockBase.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="assets/LockBase.png"
    />
    <link href="css/vendor/bootstrap.min.css" rel="stylesheet" />
    <script src="js/vendor/bootstrap.bundle.min.js"></script>
    <script>
      var needToClose = localStorage.getItem("LBNeedToClose");
      if(needToClose == "yes" && typeof needToClose !== 'undefined' && needToClose !== null && needToClose !== ""){
        console.log(needToClose)
        localStorage.setItem("LBNeedToClose","no");
        //console.log(window.location.len)
        console.log(needToClose)
        window.open('','_self').close()
        //window.close();
      }
    </script>
  </head>
  <body onload="getAttemptNumber()" data-spy="scroll" style="background-color: #212529; color: #fff;">
    <div class="container-sm pt-5 px-auto">
      <h2 class="pb-3 text-center">LockBase</h2>
      <div class="text-center pb-2">
        <img
          src="assets/LockBase.png"
          class="img-fluid"
          alt="Lockbase logo"
          height="90px"
          width="90px"
        />
      </div>
      <form class="border-secondary">
        <div class="form-group pb-5">
          <label for="attemptnumberfield">Unlock at attempt</label>
          <input
            type="number"
            class="form-control"
            id="attemptnumberfield"
            placeholder="Enter attempt number"
            name="email"
            style="border: 1px solid #212529"
          />
          <small
            >Attempt at which the screen will unlock and open home screen</small
          >
          <!--<div class="checkbox pt-3">
            <label
              ><input type="checkbox" name="remember" checked /> Remember my
              previous attempt number (Recommended)</label
            >
          </div>-->
        </div>
        <div class="pb-3 text-center">
          <a
            type="submit"
            class="btn btn-primary btn-outline-dark col-12"
            href="4code.html"
            onclick="saveAttemptNumber()"
          >
          <span style="color: #fff;">Initiate 4 code screen</span>
          </a>
        </div>
        <div class="pb-3 text-center">
          <a
            type="submit"
            class="btn btn-primary btn-outline-dark col-12"
            href="6code.html"
            onclick="saveAttemptNumber()"
          >
            <span style="color: #fff;">Initiate 6 code screen</span>
          </a>
        </div>
      </form>
      <div class="pb-3 pt-4 text-center">
        <button type="submit" class="btn btn-light col-12" onclick="window.close()">Exit</button>
      </div>
    </div>
    <script>
      function saveAttemptNumber() {
        var setattemptnumberdata =
          document.getElementById('attemptnumberfield').value;
        localStorage.setItem('LockBaseAttemptNumber', setattemptnumberdata);
      }
      function getAttemptNumber() {
        var getattemptnumberdata = localStorage.getItem(
          'LockBaseAttemptNumber'
        );
        document.getElementById('attemptnumberfield').value =
          getattemptnumberdata;
      }
    </script>
    <script>
      if('serviceWorker' in navigator){
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('./serviceworker.js')
          .then((reg) => console.log('Success: ', reg.scope))
          .catch((err) => console.log('Failure: ' , err));
        })
      }
    </script>
  </body>
</html>
